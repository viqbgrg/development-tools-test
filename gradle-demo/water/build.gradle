/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
// Closure cl = { task -> println "I'm $task.project.name" }
// task('hello').doLast(cl)
// project(':bluewhale') {
//     task('hello').doLast(cl)
// }
// 所有项目
allprojects {
    apply plugin: 'java'
    // 程序可以只有一个叫 hello 的 task
    task hello {
        doLast { task ->
            println "I'm $task.project.name"
        }
    }
}

allprojects{Project project ->
    println "${project.name}"
}
// 配置所有子项目
subprojects {
    // 不带 task 的可以有多个,是对带 task 的补充
    hello {
        doLast {
            println "- I depend on water"
        }
    }

    afterEvaluate { Project project ->
        if (project.name == "krill") {
            dependencies {
                implementation "javax.servlet:servlet-api:2.5"
            }
        }
        if (project.arctic) {
            hello.configure {
                doLast {
                    println '- I love to spend time in the arctic waters.'
                }
            }
        }
    }
}

// 配置特定项目
// project(':bluewhale').hello {
//     doLast {
//         println "- I'm the largest animal that has ever lived on this planet."
//     }
// }

// configure(subprojects.findAll {it.name!='tropicalFish'}) {
//     hello {
//         doLast {
//             println '- I love to spend time in the arctic waters.'
//         }
//     }
// }